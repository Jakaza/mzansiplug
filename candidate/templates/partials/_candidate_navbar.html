{% load static %}

<nav class="navbar navbar-expand-lg">
  <style>
    .navbar-logo,
    .mzansi-plug-logo {
      max-height: 50px;
      width: auto;
      display: block;
    }

    @media (max-width: 767px) {
      .navbar-logo,
      .mzansi-plug-logo {
        max-height: 30px;
      }

      .person-icon {
        display: none;
      }
    }
  </style>

  <div class="container">
    <a class="navbar-brand" href="{% url 'index' %}">
      <img
        src="{% static 'images/mzansiplug-logo-s.webp' %}"
        alt="Mzansi Plug Logo"
        class="navbar-logo mzansi-plug-logo"
        width="50"
        height="50"
      />
    </a>

    <div class="d-lg-none ms-auto me-4 person-icon">
      <a href="#top" class="navbar-icon bi-person smoothscroll"></a>
    </div>

    <button
      class="navbar-toggler"
      type="button"
      data-bs-toggle="collapse"
      data-bs-target="#navbarNav"
      aria-controls="navbarNav"
      aria-expanded="false"
      aria-label="Toggle navigation"
    >
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav ms-lg-5 me-lg-auto">
        <li class="nav-item">
          <a class="nav-link {% if request.resolver_match.url_name == 'index' %}active{% endif %}" href="{% url 'index' %}">Home</a>
        </li>

        <li class="nav-item">
          <a class="nav-link {% if request.resolver_match.url_name == 'south-african-jobs' %}active{% endif %}" href="{% url 'south-african-jobs' %}">Find Jobs</a>
        </li>

        <li class="nav-item">
          <a class="nav-link {% if request.resolver_match.url_name == 'south-african-salaries' %}active{% endif %}" href="{% url 'south-african-salaries' %}">Find Salaries</a>
        </li>

        <li class="nav-item">
          <a class="nav-link {% if request.resolver_match.url_name == 'south-african-careers' %}active{% endif %}" href="{% url 'south-african-careers' %}">Careers</a>
        </li>
      </ul>

      <!-- Dropdown: Candidate Menu -->
<!-- 👨‍💼 Desktop Dropdown (visible on lg and up) -->
<ul class="navbar-nav ms-3 d-none d-lg-flex">
  <li class="nav-item dropdown">
    <a
      class="nav-link dropdown-toggle d-flex align-items-center"
      href="#"
      id="userDropdown"
      role="button"
      data-bs-toggle="dropdown"
      aria-expanded="false"
    >
      <i class="bi bi-person-circle me-1" style="font-size: 1.2rem;"></i>
      {% if request.user.is_authenticated %}
        {{ request.user.first_name|default:request.user.username }}
      {% else %}
        Account
      {% endif %}
    </a>

    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="userDropdown">
      {% if request.user.is_authenticated %}
        <li><a class="dropdown-item" href="{% url 'profile' %}">My Jobs</a></li>
        <li><a class="dropdown-item" href="{% url 'profile-details' %}">Profile</a></li>
        <li><a class="dropdown-item" href="{% url 'settings' %}">Account Settings</a></li>
        <li><hr class="dropdown-divider" /></li>
        <li><a class="dropdown-item text-danger" href="{% url 'logout' %}">Sign Out</a></li>
      {% else %}
        <li><a class="dropdown-item" href="{% url 'login' %}">Sign In</a></li>
        <li><a class="dropdown-item" href="{% url 'register' %}">Sign Up</a></li>
      {% endif %}
    </ul>
  </li>
</ul>

<!-- 📱 Mobile Links (visible on small screens only) -->
<ul class="navbar-nav d-lg-none">
  {% if request.user.is_authenticated %}
    <li class="nav-item"><a class="nav-link" href="{% url 'profile' %}">My Jobs</a></li>
    <li class="nav-item"><a class="nav-link" href="{% url 'profile-details' %}">Profile</a></li>
    <li class="nav-item"><a class="nav-link" href="{% url 'settings' %}">Account Settings</a></li>
    <li><hr class="dropdown-divider" /></li>
    <li class="nav-item"><a class="nav-link text-danger" href="{% url 'logout' %}">Sign Out</a></li>
  {% else %}
    <li class="nav-item"><a class="nav-link" href="{% url 'login' %}">Sign In</a></li>
    <li class="nav-item"><a class="nav-link" href="{% url 'register' %}">Sign Up</a></li>
  {% endif %}
</ul>

    </div>
  </div>
</nav>
